.row.col-xs-10.col-ms-10.col-md-10.col-lg-10.col-md-offset-1
  = render 'search_form'
.visible-md-block.visible-lg-block
  .content
    .row.col-xs-10.col-ms-10.col-md-5.col-lg-5.col-md-offset-1
      %h4 前期
      %table.table-bordered.time-table
        - period = 0
        %tr.text-center
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 月曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 火曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 水曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 木曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 金曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 土曜
        - while period <= 5 do
          - wday = 0
          %tr.text-center
            %td.period-table
              = period+1
            - while wday <= 5 do
              - if lesson = @lessons.find_by(period: period, wday: wday, term_id: [1, 3])
                %td.persent= link_to lesson.name.truncate(15), lesson_path(lesson)
              - else
                %td= link_to"", new_top_path(wday: wday, period: period, term_id: [1, 3], gread_id: current_user.gread_id)
              - wday = wday + 1
          - period = 1 + period
    .col-xs-10.col-ms-10.col-md-5.col-lg-5
      %h4 後期
      %table.table-bordered.time-table
        - period = 0
        %tr.text-center
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 月曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 火曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 水曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 木曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 金曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 土曜
        - while period <= 5 do
          - wday = 0
          %tr.text-center
            %td
              = period+1
            - while wday <= 5 do
              - if lesson = @lessons.find_by(period: period, wday: wday, term_id: [2, 4])
                %td.persent= link_to lesson.name, lesson_path(lesson)
              - else
                %td= link_to"", new_top_path(wday: wday, period: period, term_id: [2, 4], gread_id: current_user.gread_id)
              - wday = wday + 1
            - period = 1 + period
      %h4.text-right 総単位数・・・#{User.ture_user_lessons(current_user).map{|e|e.unit}.sum}単位
    .row.col-xs-10.col-ms-10.col-md-10.col-lg-10.col-md-offset-1
      = link_to "時間割をリセットする", '/lessons_users/all_destroy', method: :delete, class: "btn btn-danger mgs", data: { confirm: '全ての授業を削除しますか？' }
.visible-xs-block.visible-sm-block.mgs
  .content
    .row.col-xs-12.col-ms-12
      %h4 前期
      %table.table-bordered
        - period = 0
        %tr.text-center
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 月曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 火曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 水曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 木曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 金曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 土曜
        - while period <= 5 do
          - wday = 0
          %tr.text-center
            %td
              = period+1
            - while wday <= 5 do
              - if lesson = @lessons.find_by(period: period, wday: wday, term_id: [1, 3])
                %td.persent= link_to lesson.name.truncate(15), lesson_path(lesson)
              - else
                %td= link_to"", new_top_path(wday: wday, period: period, term_id: [1, 3], gread_id: current_user.gread_id)
              - wday = wday + 1
          - period = 1 + period
    .col-xs-12.col-ms-12
      %h4 後期
      %table.table-bordered
        - period = 0
        %tr.text-center
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 月曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 火曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 水曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 木曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 金曜
          %th.col-xs-1.col-ms-1.col-md-1.col-lg-1 土曜
        - while period <= 5 do
          - wday = 0
          %tr.text-center
            %td
              = period+1
            - while wday <= 5 do
              - if lesson = @lessons.find_by(period: period, wday: wday, term_id: [2, 4])
                %td.persent= link_to lesson.name, lesson_path(lesson)
              - else
                %td= link_to"", new_top_path(wday: wday, period: period, term_id: [2, 4], gread_id: current_user.gread_id)
              - wday = wday + 1
            - period = 1 + period
      %h4.text-right 総単位数・・・#{User.ture_user_lessons(current_user).map{|e|e.unit}.sum}単位
    .row.col-xs-10.col-ms-10.col-md-10.col-lg-10.col-md-offset-1
      = link_to "時間割をリセットする", '/lessons_users/all_destroy', method: :delete, class: "btn btn-danger mgs", data: { confirm: '全ての授業を削除しますか？'}
= render 'need_textbooks'